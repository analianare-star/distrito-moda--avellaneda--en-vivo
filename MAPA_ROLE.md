# Mapa interactivo de roles, experiencias y capas técnicas

Este documento sintetiza para cada rol el flujo UX y los módulos de backend/frontend que lo sostienen, enlazando a las especificaciones y al código.

| Rol | Experiencia (storytelling) | Capas técnicas involucradas | Referencias / estado |
| --- | --- | --- | --- |
| **Admin** | Dashboard con pestañas, activaciones y motor de sanciones: cada acción dispara AuditLog y QuotaTransaction. | Front: `features/admin/*`, `AdminDashboard.tsx`, `AppOverlays.tsx`.<br>Back: `shops.controller.ts`, `streams.controller.ts`, `payments.controller.ts`.<br>Servicios: `shops.service.ts`, `notifications.service.ts`, `payments.service.ts`, `quota.service.ts`, `synchronizers`.<br>Prisma: `PurchaseRequest`, `QuotaTransaction`, `AuditLog`, `AgendaSuspension`, `LiveScheduleEvent`, `Notification`. | `MODELO_FINAL_CONGELADO.md` (roles y reglas), `PASO_4_CUPOS_COMPRAS.md` (paso ejecutado), `PASO_7_MOTOR_SANCIONES_AUDITORIA.md` (pendiente/??). |
| **Tienda** | Panel con resumen, cupos, compras y pagos; compras activan MercadoPago y actualizan cuotas/cupos automáticamente. | Front: `Dashboard.tsx`, `ShopPurchaseModal.tsx`, `MercadoPagoWallet.tsx`, `ShopDetailModal.tsx`.<br>Back: `payments.service.ts`, `payments.controller.ts`, `quota.service.ts`, `streams.service.ts`, `notifications.service.ts`.<br>Prisma: `QuotaWallet`, `QuotaTransaction`, `PurchaseRequest`, `LiveReport`, `LiveRating`, `Reminder`, `Notification`. | `PASO_4_CUPOS_COMPRAS.md` (hecho) ??, `PASO_5_AGENDA_NOTIFICACIONES.md` y `PASO_6_RATINGS_REPORTS.md` (oportunidad). Pagos: MercadoPago/`payments` + webhook. |
| **Cliente** | Home público ? login ? recordatorios, reportes y calificaciones; interactuación con WhatsApp y tarjeta digital. | Front: `ClientView.tsx`, `StoryModal.tsx`, `HeroSection.tsx`, `StreamCard.tsx`, `useClientViewActions.tsx`, `ShopDetailModal.tsx`.<br>Back: `clients.service.ts`, `reviews.service.ts`, `reports.service.ts`, `notifications.service.ts`.<br>Prisma: `Reminder`, `Notification`, `LiveRating`, `LiveReport`, `ShopAggregate`. | `MODELO_FINAL_CONGELADO.md` (reglas de reportes y rating) y `PASO_5`/`PASO_6` (pendientes). |
